import{u as D}from"./index-D8N9kn5i.js";import{_ as F,r as g,o as L,c as M,a as y,b as l,d as w,e as C,w as c,f as o,g as X,h as q,F as J,m as K,i as x,j as O,n as Q,t as W,p as Y,k as Z,l as h}from"./index-DXODCsIi.js";var f,ee=new Uint8Array(16);function te(){if(!f&&(f=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!f))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return f(ee)}const ae=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ne(e){return typeof e=="string"&&ae.test(e)}var a=[];for(var b=0;b<256;++b)a.push((b+256).toString(16).substr(1));function oe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase();if(!ne(n))throw TypeError("Stringified UUID is invalid");return n}function se(e,t,n){e=e||{};var r=e.random||(e.rng||te)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(var u=0;u<16;++u)t[n+u]=r[u];return t}return oe(r)}const P=e=>(Y("data-v-023d27b1"),e=e(),Z(),e),le=P(()=>h("div",{class:"d-flex justify-space-between align-center"},[h("h2",{class:"font-weight-light"},"VÃ¤lj spelare")],-1)),ce=P(()=>h("br",null,null,-1)),re={__name:"HomeView",setup(e){const t=D(),n=g([]),r=g(""),u=g(!1);L(async()=>{await V()});const k=M(()=>t.getAvailablePlayers.slice().sort((s,d)=>s.id-d.id));async function V(){const s=await y.getPlayers();s.success&&t.setAvailablePlayers(s.data)}function S(s){n.value.some(m=>m.name===s.name)?n.value=n.value.filter(m=>m.name!==s.name):n.value.push(s),t.setSelectedPlayers(n)}async function I(){(await y.createPlayer(r.value)).success&&(u.value=!1,r.value,await V())}async function N(){const s=se();(await y.createNewGame({gameId:s,players:n.value.map(m=>m.name)})).success&&setTimeout(()=>{O.push({name:"game",params:{gameId:s}})},200)}return(s,d)=>{const m=l("v-divider"),R=l("v-chip"),A=l("v-icon"),p=l("v-btn"),E=l("v-text-field"),U=l("v-card-text"),j=l("v-spacer"),B=l("v-card-actions"),T=l("v-card"),z=l("v-dialog"),G=l("v-col"),H=l("v-row"),$=l("v-container");return w(),C($,null,{default:c(()=>[o(H,null,{default:c(()=>[o(G,null,{default:c(()=>[le,o(m,{class:"my-4"}),(w(!0),X(J,null,q(k.value,(i,v)=>(w(),C(R,{key:v,class:Q({"mr-2":!0,"mt-2":!0,"selected-player":n.value.some(_=>_.name===i.name)}),ripple:!1,variant:n.value.some(_=>_.name===i.name)?"elevated":"outlined",size:"large",label:"",onClick:_=>S(i)},{default:c(()=>[x(W(i.name),1)]),_:2},1032,["class","variant","onClick"]))),128)),o(z,{modelValue:u.value,"onUpdate:modelValue":d[1]||(d[1]=i=>u.value=i),"max-width":"500"},{activator:c(({props:i})=>[o(p,K(i,{variant:"text",color:"blue-lighten-1",class:"mt-2"}),{default:c(()=>[o(A,{size:"x-large"},{default:c(()=>[x(" mdi-account-plus-outline ")]),_:1})]),_:2},1040)]),default:c(({isActive:i})=>[o(T,{title:"Ny spelare"},{default:c(()=>[o(U,null,{default:c(()=>[o(E,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=v=>r.value=v),label:"Namn",variant:"solo-filled"},null,8,["modelValue"])]),_:1}),o(B,null,{default:c(()=>[o(j),o(p,{text:"Avbryt",onClick:v=>i.value=!1},null,8,["onClick"]),o(p,{text:"Spara",onClick:I})]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]),ce,o(p,{class:"mt-10",block:"",color:"red-lighten-1",onClick:N,disabled:n.value.length<4},{default:c(()=>[x(" Starta spel ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})}}},de=F(re,[["__scopeId","data-v-023d27b1"]]);export{de as default};
